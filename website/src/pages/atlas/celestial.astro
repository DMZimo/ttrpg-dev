---
import BaseLayout from "../../layouts/BaseLayout.astro";
import { SITE_TITLE } from "../../consts";
import { getCollection } from "astro:content";
import Atlas from "../../components/atlas/Atlas";

// Get all celestial bodies
const celestialBodies = await getCollection("celestial");
---

<BaseLayout
  title={`Celestial Bodies - ${SITE_TITLE}`}
  description="Explore the 3D map of Realmspace and learn about the celestial bodies that make up our crystal sphere."
  class="w-full h-screen overflow-hidden"
>
  <section class="bg-surface h-full flex flex-col">
    <!-- Atlas Header -->
    <div
      class="bg-surface-secondary border-b border-accent-500/20 px-4 sm:px-6 lg:px-8 py-4"
    >
      <div class="flex items-center justify-between">
        <div class="flex items-center space-x-4">
          <a
            href="/atlas"
            class="text-secondary hover:text-primary transition-colors flex items-center space-x-2"
          >
            <svg
              class="w-5 h-5"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M15 19l-7-7 7-7"></path>
            </svg>
            <span>Atlas</span>
          </a>
          <span class="text-muted">/</span>
          <h1 class="text-xl font-bold text-primary">
            Chapter I: The Crystal Sphere
          </h1>
        </div>
        <div class="text-sm text-secondary">
          {celestialBodies.length} celestial bodies
        </div>
      </div>
    </div>

    <!-- Interactive 3D Map -->
    <div class="flex-1 min-h-0">
      <Atlas celestialData={celestialBodies} client:load />
    </div>

    <!-- Atlas Footer -->
    <div
      class="bg-surface-secondary border-t border-accent-500/20 px-4 sm:px-6 lg:px-8 py-3"
    >
      <div class="flex items-center justify-between text-sm">
        <div class="text-secondary">
          Interactive 3D Map • Click and drag to rotate • Scroll to zoom
        </div>
        <div class="flex items-center space-x-4">
          <span class="text-muted">Next:</span>
          <a
            href="/atlas/continents"
            class="text-gold-600 hover:text-gold-500 transition-colors flex items-center space-x-1"
          >
            <span>Continents</span>
            <svg
              class="w-4 h-4"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M9 5l7 7-7 7"></path>
            </svg>
          </a>
        </div>
      </div>
    </div>
  </section>
</BaseLayout>
