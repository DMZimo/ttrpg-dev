---
import BaseLayout from "@/layouts/BaseLayout.astro";
import { SITE_TITLE, SITE_DESCRIPTION } from "@/consts";
import HeroSection from "@/components/home/HeroSection.astro";
import LatestSessions from "@/components/home/LatestSessions.astro";
import CampaignInfo from "@/components/home/CampaignInfo.astro";
import { calculateCampaignStats } from "@/utils/campaignUtils";
import { getCollection } from "astro:content";

// Get calculated stats from the centralized utility
const statsData = await calculateCampaignStats();

// Get journal entries for the session timeline
const journalEntries = await getCollection("journal");

// Destructure the stats for easier use
const {
  totalSessions,
  totalCharacters,
  totalNPCs,
  totalQuests,
  activeQuests,
  completedQuests,
  totalMysteries,
  activeMysteries,
  totalRumors,
  activePlayers,
  currentLevel,
  totalPlayTime,
  averageSessionLength,
  combatEncounters,
  deathSaves,
  criticalHits,
  questCompletionRate,
  mysteryResolutionRate,
  sessionPacing,
  characterDevelopment,
  npcInteractions,
  locationVisits,
  campaignMomentum,
} = statsData;
---

<BaseLayout
  title={SITE_TITLE}
  description={SITE_DESCRIPTION}
  class="w-full p-0 m-0"
>
  <HeroSection />
</BaseLayout>
